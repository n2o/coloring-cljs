(ns scarf.core
  (:require [goog.dom :as gdom]
            [om.next :as om :refer-macros [defui]]
            [om.dom :as dom]))

(enable-console-print!)

;;;;;;;;;;;;;;;;
;; https://github.com/omcljs/om/wiki/Components%2C-Identity-%26-Normalization#something-to-look-at
;;;;;;;;;;;;;;;;

(def app-state
  (atom
    {:app/title "Animals"
     :animals/list
                [[1 "Ant"] [2 "Antelope"] [3 "Bird"] [4 "Cat"] [5 "Dog"]
                 [6 "Lion"] [7 "Mouse"] [8 "Monkey"] [9 "Snake"] [10 "Zebra"]]}))

(defmulti read (fn [env key params] key))

(defmethod read :default
  [{:keys [state] :as env} key params]
  (let [st @state]
    (if-let [[_ value] (find st key)]
      {:value value}
      {:value :not-found})))

(defmethod read :animals/list
  [{:keys [state] :as env} key {:keys [start end]}]
  {:value (subvec (:animals/list @state) start end)})

(defui AnimalsList
  static om/IQueryParams
  (params [this]
    {:start 0 :end 10})
  static om/IQuery
  (query [this]
    '[:app/title (:animals/list {:start ?start :end ?end})])
  Object
  (render [this]
    (let [{:keys [app/title animals/list]} (om/props this)]
      (dom/div nil
               (dom/h2 nil title)
               (apply dom/ul nil
                      (map
                        (fn [[i name]]
                          (dom/li nil (str i ". " name)))
                        list))))))

(defui scarf
  Object
  (render [this]
    (let [{:keys [app/title animals/list]} (om/props this)]
      (dom/div nil
               (dom/h2 nil "SVG")
               (dom/path #js {:id "foo"
                              :d "m 232.88944,504.70066 c -0.12048,-0.72594 -0.28787,-1.44564 -0.36146,-2.17782 -0.2875,-2.86046 -0.28109,-5.88888 -0.15871,-8.73909 0.22281,-5.18937 0.64998,-9.32838 1.46166,-14.5264 0.46101,-2.95225 1.06549,-5.8803 1.59823,-8.82046 1.81243,-6.8831 2.7986,-12.0957 6.05913,-18.51902 1.48095,-2.91749 3.33123,-5.64469 5.2643,-8.28443 1.75778,-2.40036 3.57632,-4.80275 5.78176,-6.79965 6.37318,-5.77053 16.87688,-9.53028 23.91209,-12.80847 2.91012,-0.38457 5.79841,-1.01083 8.73034,-1.1537 8.76212,-0.42698 16.85417,1.74962 24.71602,5.495 6.66528,3.17533 8.56425,4.95778 14.54886,9.27053 5.21602,4.92676 8.40706,7.57557 12.85944,13.23518 5.45379,6.93256 10.42856,15.55293 14.32401,23.47697 1.06745,2.17139 1.9959,4.40839 2.99385,6.61258 2.73205,6.39482 4.63412,13.0647 5.06168,20.02457 0.26976,4.39126 0.0509,6.29575 -0.15744,10.79641 -0.5145,10.05369 -2.22493,20.03534 -2.42731,30.10733 -0.0375,1.86526 0.0426,3.73103 0.0639,5.59654 0.28427,6.45164 1.90822,12.74408 6.64636,17.41727 3.86258,3.80964 6.01337,4.41352 11.00392,7.05837 2.76452,1.06569 5.47916,2.27112 8.29357,3.19709 15.5567,5.11826 32.15364,7.24364 48.48055,7.51225 4.72202,0.0777 9.44367,-0.17687 14.1655,-0.2653 12.62829,-0.84397 25.49066,-2.17163 37.48149,-6.53745 3.54623,-1.29117 6.94917,-2.96314 10.30439,-4.69095 0.5085,-0.26186 0.7766,-0.84143 1.19539,-1.23098 2.72154,-2.53154 5.48249,-5.02038 8.22374,-7.53057 2.33766,-2.91599 4.88081,-5.67851 7.01298,-8.74796 8.2134,-11.82397 14.23737,-26.78136 16.68204,-40.95985 0.64859,-3.76169 0.85749,-7.58609 1.28624,-11.37913 0.33568,-12.26679 0.11876,-25.03499 -5.75911,-36.17486 -3.02225,-5.72783 -5.26104,-7.5328 -9.63394,-12.30115 -10.15597,-9.52805 -22.43176,-16.12726 -34.77624,-22.32198 -3.55385,-1.54217 -7.46105,-3.84874 -11.44332,-4.11409 -1.36535,-0.091 -1.89855,0.15548 -3.16313,0.49365 -0.46712,0.21921 -0.94627,0.41444 -1.40137,0.65762 -0.45044,0.2407 -1.76106,1.03444 -1.31153,0.79205 2.47381,-1.33383 4.80454,-2.95509 7.38567,-4.06713 0.7749,-0.33385 -1.27807,1.10374 -1.87995,1.69508 -1.99973,1.96477 -2.60845,2.82264 -4.46392,5.05531 -5.68433,7.50855 -10.556,15.59161 -15.5303,23.57698 -4.8242,7.48049 -9.75697,14.89972 -15.19615,21.9495 -4.93697,6.10102 -10.48981,11.67246 -15.89718,17.35165 -6.10227,6.44799 -12.1721,12.9758 -19.0626,18.60377 -1.44601,1.18106 -2.95208,2.28663 -4.42812,3.42994 -7.45145,5.0832 -15.39056,9.5959 -23.54229,13.43898 -1.88362,0.88802 -3.92105,1.41526 -5.9264,1.97665 -5.03335,1.40909 -7.67683,1.66319 -12.84227,2.46875 -2.42395,0.15572 -4.84324,0.42728 -7.27186,0.46714 -12.32743,0.20236 -24.7019,-1.51097 -36.70825,-4.17461 -3.49223,-0.77477 -6.94718,-1.7089 -10.42078,-2.56334 -11.05632,-3.19313 -21.76887,-7.34328 -32.18709,-12.21324 -3.47363,-1.62374 -6.94554,-3.25986 -10.3242,-5.07294 -8.05031,-4.32003 -12.20118,-7.23891 -19.81387,-12.185 -10.11944,-7.22061 -19.59773,-15.34129 -27.79007,-24.72244 -4.46391,-5.11169 -13.64922,-17.24015 -17.50629,-22.84552 -2.70954,-3.93769 -5.17485,-8.03797 -7.76228,-12.05696 -6.78438,-11.22445 -12.89185,-22.86506 -17.80623,-35.03458 -2.29466,-5.68229 -4.10892,-10.77185 -5.2998,-16.74222 -0.38802,-1.94532 -0.49698,-3.93603 -0.74546,-5.90404 0.22465,-3.73135 -0.12411,-4.89659 1.53445,-8.17766 1.10343,-2.18288 2.65593,-3.68689 4.78746,-4.87169 12.36567,-6.87335 8.454,-5.69559 17.34142,-7.25935 12.24841,-1.03671 24.55679,0.6166 36.52079,3.21026 2.83748,0.61513 5.64699,1.35286 8.47049,2.02929 11.96819,3.33663 23.7827,7.32838 35.12078,12.43003 6.41436,2.88619 7.97972,3.80305 14.03881,6.95409 5.9439,3.50442 12.07517,7.11487 16.95822,12.08064 2.87006,2.91868 3.3428,4.02271 5.65861,7.52154 4.36331,7.70798 7.08994,16.20098 9.09172,24.7981 1.24001,5.3255 1.87891,9.84899 2.7492,15.23152 0.28361,2.70223 0.69971,5.39382 0.85084,8.10669 0.18779,3.37097 0.17256,6.75107 0.16494,10.12726 -0.0218,9.65813 -0.28463,13.63828 -0.96684,23.4654 -0.29169,4.20172 -0.5699,8.40554 -0.97591,12.59776 -0.42798,4.4191 -1.0171,8.82112 -1.52565,13.23168 -2.36376,18.08107 -5.91038,35.99631 -10.32106,53.68554 -2.2227,8.91421 -3.19771,12.06846 -5.66026,20.69055 -5.28919,17.91996 -13.45405,34.74962 -22.08439,51.25189 -2.43729,5.41268 -8.70019,14.41289 -6.94805,20.70203 1.10592,3.96958 3.53216,5.59744 6.33798,8.46525 1.93553,1.42915 3.79532,2.96702 5.8066,4.28745 5.60504,3.67977 10.98502,6.39504 17.11334,9.18743 10.6374,4.84698 21.62532,8.73633 32.63164,12.63523 9.80955,3.147 19.58635,6.62477 29.75775,8.44285 4.70441,0.84089 5.29341,0.76999 9.93577,1.11648 5.58814,-0.0378 11.28471,-0.77838 16.36404,-3.26998 1.44947,-0.71102 3.8066,-0.878 4.17864,-2.44902 0.31064,-1.3117 -2.58243,0.77408 -3.87365,1.16113 1.51957,-1.55559 3.15108,-3.00919 4.55871,-4.66676 7.74349,-9.1184 12.14057,-20.4141 14.72082,-31.97916 0.82657,-3.70478 1.30897,-7.47804 1.96345,-11.21705 2.82867,-23.58074 1.24851,-47.35665 -1.95663,-70.80743 -0.66359,-4.85522 -1.47718,-9.68875 -2.21577,-14.53312 -3.73224,-21.44825 -8.6413,-42.69895 -14.70912,-63.60808 -1.15359,-3.97517 -2.40324,-7.92184 -3.60487,-11.88276 -4.69584,-15.44832 -10.06621,-30.67507 -15.14412,-45.99781 -2.4858,-7.50098 -4.49675,-13.93317 -6.87337,-21.43788 -2.76272,-8.87348 -5.18309,-17.84047 -6.93803,-26.9695 -0.4837,-2.51618 -0.97383,-5.03436 -1.30582,-7.57501 -0.73459,-5.62169 -0.67022,-8.46632 -0.8139,-14.03843 -0.0866,-6.46379 0.94607,-12.81359 2.35299,-19.09205 0,0 9.23197,-4.42987 9.23197,-4.42987 l 0,0 c -1.63578,6.24123 -2.88071,12.56629 -2.86131,19.05704 0.0614,5.85206 -0.0638,8.04533 0.63075,13.97543 1.37903,11.77448 4.53105,23.27455 7.80532,34.63191 6.89913,22.63828 14.80046,44.94816 21.82867,67.54638 1.20164,3.96958 2.45627,7.92351 3.60493,11.90874 6.0467,20.97895 10.95181,42.29742 14.49466,63.84224 0.73127,4.85801 1.53404,9.7058 2.19381,14.57404 3.17832,23.45199 4.97942,47.1994 2.51141,70.81438 -1.44307,8.82409 -1.81417,13.11632 -4.45842,21.58572 -3.12945,10.02352 -8.24697,19.28752 -15.84058,26.59575 -2.61862,1.76873 -12.19349,8.82828 -17.45209,11.23295 -5.19274,2.37455 -10.9385,2.99005 -16.58137,2.87327 -4.64728,-0.43604 -5.19424,-0.36803 -9.88242,-1.31379 -10.01916,-2.02119 -19.59987,-5.71074 -29.26898,-8.92959 -7.44549,-2.73407 -14.01233,-5.09373 -21.4135,-8.03417 -9.89439,-3.931 -19.86779,-8.01093 -28.88987,-13.74442 -2.08732,-1.32648 -4.01319,-2.89139 -6.01979,-4.33708 -3.09489,-3.06544 -5.62958,-4.68899 -6.90442,-8.97654 -2.03848,-6.8558 4.53584,-15.58892 7.22542,-21.43042 3.34569,-6.26237 5.08993,-9.37905 8.21546,-15.85673 5.51317,-11.42608 10.35901,-23.20145 14.14699,-35.31429 2.44224,-8.13457 3.80794,-12.43406 5.99382,-20.80156 4.60518,-17.62851 8.21945,-35.52766 10.43808,-53.61832 2.15708,-19.45879 4.1342,-39.32454 2.76863,-58.92117 -0.18724,-2.687 -0.59351,-5.35424 -0.89027,-8.03135 -0.39006,-2.49908 -0.71884,-5.00849 -1.17018,-7.49723 -2.0131,-11.10047 -5.07619,-22.17077 -10.77577,-31.98163 -2.34956,-3.41407 -2.78831,-4.38745 -5.60822,-7.26643 -4.78427,-4.88449 -10.68864,-8.55542 -16.4788,-12.09333 -6.10743,-3.27464 -7.30424,-4.03667 -13.82363,-7.00411 -11.28241,-5.13542 -23.05752,-9.13855 -35.04225,-12.28227 -2.83164,-0.65407 -5.65058,-1.3658 -8.49492,-1.96222 -12.01915,-2.52028 -24.40933,-4.08696 -36.67028,-2.63678 -7.95374,1.74314 -4.78165,1.71386 0.19708,-2.5413 0.87568,-0.74841 -2.06437,1.06774 -2.94008,1.8161 -3.26732,2.7922 -3.87245,6.32121 -4.1327,10.38662 0.15483,1.96953 0.1589,3.95675 0.46449,5.90858 0.92877,5.93225 2.6107,11.23232 4.73712,16.87021 4.62002,12.24933 10.68947,23.87086 17.43891,35.07017 2.57836,4.00367 5.03681,8.08715 7.73508,12.011 4.63287,6.73716 12.13286,16.56627 17.5825,22.6568 8.26822,9.24059 17.74837,17.31493 27.88145,24.42852 8.33173,5.44462 10.87939,7.36852 19.74577,12.09781 13.49028,7.19565 27.79699,12.85223 42.48429,17.0621 3.47213,0.83646 6.92281,1.76757 10.41639,2.50937 12.06029,2.56082 24.5673,4.13907 36.92008,3.71748 2.43953,-0.0833 4.86583,-0.39574 7.29875,-0.59361 5.20117,-0.86866 7.72277,-1.1215 12.77606,-2.63015 2.00279,-0.59793 3.83521,-2.3456 5.91023,-2.09464 1.33907,0.16195 -4.55451,2.74178 -3.24538,2.41693 1.31894,-0.32728 8.70676,-5.29156 9.77779,-5.99176 4.10545,-3.12781 4.73702,-3.48762 8.57707,-6.89022 5.26267,-4.66315 10.04925,-9.83841 14.86309,-14.95284 5.3463,-5.66851 10.80905,-11.24817 15.82367,-17.21445 5.5282,-7.02054 10.54639,-14.42193 15.39853,-21.92243 4.96634,-7.95349 9.76538,-16.03153 15.29851,-23.61176 2.05938,-2.61446 2.11975,-2.81284 4.27139,-5.11654 0.57028,-0.61058 1.06324,-1.32277 1.75857,-1.78594 3.40982,-2.27134 6.98259,-4.28853 10.50413,-6.38247 1.16259,-0.69129 1.62818,-0.76882 2.91073,-1.19687 1.44617,-0.1941 1.84447,-0.34609 3.35672,-0.11147 4.01089,0.62228 7.65628,2.85988 11.24029,4.58279 5.34897,2.84252 10.76799,5.61485 15.91976,8.80867 6.62608,4.10781 12.98714,8.69986 18.69798,14.01923 4.51582,4.88799 6.77652,6.65435 9.84078,12.57962 5.91218,11.43221 5.81247,24.30673 5.54068,36.81495 -0.40186,3.81972 -0.58511,7.6688 -1.20558,11.45915 -1.79802,10.98366 -5.60715,21.6138 -10.74278,31.46697 -1.76119,3.379 -3.63341,6.71352 -5.77387,9.86595 -2.11008,3.10771 -4.63249,5.9145 -6.94874,8.87174 -2.70364,2.55656 -5.08361,5.50611 -8.11091,7.66969 -7.06556,5.04967 -18.42198,11.69542 -27.3452,14.82316 -11.9788,4.19876 -24.78387,5.37899 -37.34986,6.15803 -4.73758,0.0753 -9.4752,0.30364 -14.21274,0.22603 -16.55802,-0.27125 -33.38285,-2.31871 -49.21313,-7.35076 -2.88766,-0.91791 -5.67592,-2.12335 -8.51387,-3.18503 -5.31587,-2.7143 -7.42849,-3.21358 -11.52223,-7.21406 -4.93645,-4.824 -6.64152,-11.35138 -6.89176,-18.04546 -0.0356,-5.35032 -0.13778,-6.29298 0.22959,-11.73681 0.541,-8.01686 1.71488,-15.9877 2.12114,-24.01694 0.1679,-4.58208 0.34155,-6.15028 0.0844,-10.60087 -0.39724,-6.87571 -2.04257,-13.53141 -4.59537,-19.92246 -0.94235,-2.21262 -1.80715,-4.4599 -2.82704,-6.63788 -3.84067,-8.20176 -8.46896,-16.21859 -14.11196,-23.32349 -4.74644,-5.97606 -7.21767,-7.86092 -12.8029,-13.0223 -5.89542,-4.18023 -7.89222,-6.00025 -14.44459,-9.05972 -7.67849,-3.58527 -15.88334,-5.65841 -24.40244,-5.11343 -2.88943,0.18484 -5.72589,0.86384 -8.58883,1.29576 -0.62283,-4.25809 -0.002,-3.38094 -7.68319,3.26557 -2.26077,1.95615 -4.12746,4.34268 -5.93673,6.72263 -1.96081,2.57928 -3.84623,5.24584 -5.3454,8.11811 -3.3344,6.38841 -4.23549,11.41516 -6.02958,18.29377 -1.74765,10.1542 -3.6811,21.00769 -2.23857,31.34557 0.092,0.65947 0.27412,1.30321 0.41119,1.95481 0,0 -9.25188,5.12804 -9.25188,5.12804 z"})
               (dom/svg #js {:className "circular" :viewBox "25 25 50 50"}
                        (dom/circle #js {:className "path" :cx "50" :cy "50" :r "20" :strokeWidth "5" :strokeMiterlimit "10"}))
               ))))

;<path
;id="path3336"
;d="m 232.88944,504.70066 c -0.12048,-0.72594 -0.28787,-1.44564 -0.36146,-2.17782 -0.2875,-2.86046 -0.28109,-5.88888 -0.15871,-8.73909 0.22281,-5.18937 0.64998,-9.32838 1.46166,-14.5264 0.46101,-2.95225 1.06549,-5.8803 1.59823,-8.82046 1.81243,-6.8831 2.7986,-12.0957 6.05913,-18.51902 1.48095,-2.91749 3.33123,-5.64469 5.2643,-8.28443 1.75778,-2.40036 3.57632,-4.80275 5.78176,-6.79965 6.37318,-5.77053 16.87688,-9.53028 23.91209,-12.80847 2.91012,-0.38457 5.79841,-1.01083 8.73034,-1.1537 8.76212,-0.42698 16.85417,1.74962 24.71602,5.495 6.66528,3.17533 8.56425,4.95778 14.54886,9.27053 5.21602,4.92676 8.40706,7.57557 12.85944,13.23518 5.45379,6.93256 10.42856,15.55293 14.32401,23.47697 1.06745,2.17139 1.9959,4.40839 2.99385,6.61258 2.73205,6.39482 4.63412,13.0647 5.06168,20.02457 0.26976,4.39126 0.0509,6.29575 -0.15744,10.79641 -0.5145,10.05369 -2.22493,20.03534 -2.42731,30.10733 -0.0375,1.86526 0.0426,3.73103 0.0639,5.59654 0.28427,6.45164 1.90822,12.74408 6.64636,17.41727 3.86258,3.80964 6.01337,4.41352 11.00392,7.05837 2.76452,1.06569 5.47916,2.27112 8.29357,3.19709 15.5567,5.11826 32.15364,7.24364 48.48055,7.51225 4.72202,0.0777 9.44367,-0.17687 14.1655,-0.2653 12.62829,-0.84397 25.49066,-2.17163 37.48149,-6.53745 3.54623,-1.29117 6.94917,-2.96314 10.30439,-4.69095 0.5085,-0.26186 0.7766,-0.84143 1.19539,-1.23098 2.72154,-2.53154 5.48249,-5.02038 8.22374,-7.53057 2.33766,-2.91599 4.88081,-5.67851 7.01298,-8.74796 8.2134,-11.82397 14.23737,-26.78136 16.68204,-40.95985 0.64859,-3.76169 0.85749,-7.58609 1.28624,-11.37913 0.33568,-12.26679 0.11876,-25.03499 -5.75911,-36.17486 -3.02225,-5.72783 -5.26104,-7.5328 -9.63394,-12.30115 -10.15597,-9.52805 -22.43176,-16.12726 -34.77624,-22.32198 -3.55385,-1.54217 -7.46105,-3.84874 -11.44332,-4.11409 -1.36535,-0.091 -1.89855,0.15548 -3.16313,0.49365 -0.46712,0.21921 -0.94627,0.41444 -1.40137,0.65762 -0.45044,0.2407 -1.76106,1.03444 -1.31153,0.79205 2.47381,-1.33383 4.80454,-2.95509 7.38567,-4.06713 0.7749,-0.33385 -1.27807,1.10374 -1.87995,1.69508 -1.99973,1.96477 -2.60845,2.82264 -4.46392,5.05531 -5.68433,7.50855 -10.556,15.59161 -15.5303,23.57698 -4.8242,7.48049 -9.75697,14.89972 -15.19615,21.9495 -4.93697,6.10102 -10.48981,11.67246 -15.89718,17.35165 -6.10227,6.44799 -12.1721,12.9758 -19.0626,18.60377 -1.44601,1.18106 -2.95208,2.28663 -4.42812,3.42994 -7.45145,5.0832 -15.39056,9.5959 -23.54229,13.43898 -1.88362,0.88802 -3.92105,1.41526 -5.9264,1.97665 -5.03335,1.40909 -7.67683,1.66319 -12.84227,2.46875 -2.42395,0.15572 -4.84324,0.42728 -7.27186,0.46714 -12.32743,0.20236 -24.7019,-1.51097 -36.70825,-4.17461 -3.49223,-0.77477 -6.94718,-1.7089 -10.42078,-2.56334 -11.05632,-3.19313 -21.76887,-7.34328 -32.18709,-12.21324 -3.47363,-1.62374 -6.94554,-3.25986 -10.3242,-5.07294 -8.05031,-4.32003 -12.20118,-7.23891 -19.81387,-12.185 -10.11944,-7.22061 -19.59773,-15.34129 -27.79007,-24.72244 -4.46391,-5.11169 -13.64922,-17.24015 -17.50629,-22.84552 -2.70954,-3.93769 -5.17485,-8.03797 -7.76228,-12.05696 -6.78438,-11.22445 -12.89185,-22.86506 -17.80623,-35.03458 -2.29466,-5.68229 -4.10892,-10.77185 -5.2998,-16.74222 -0.38802,-1.94532 -0.49698,-3.93603 -0.74546,-5.90404 0.22465,-3.73135 -0.12411,-4.89659 1.53445,-8.17766 1.10343,-2.18288 2.65593,-3.68689 4.78746,-4.87169 12.36567,-6.87335 8.454,-5.69559 17.34142,-7.25935 12.24841,-1.03671 24.55679,0.6166 36.52079,3.21026 2.83748,0.61513 5.64699,1.35286 8.47049,2.02929 11.96819,3.33663 23.7827,7.32838 35.12078,12.43003 6.41436,2.88619 7.97972,3.80305 14.03881,6.95409 5.9439,3.50442 12.07517,7.11487 16.95822,12.08064 2.87006,2.91868 3.3428,4.02271 5.65861,7.52154 4.36331,7.70798 7.08994,16.20098 9.09172,24.7981 1.24001,5.3255 1.87891,9.84899 2.7492,15.23152 0.28361,2.70223 0.69971,5.39382 0.85084,8.10669 0.18779,3.37097 0.17256,6.75107 0.16494,10.12726 -0.0218,9.65813 -0.28463,13.63828 -0.96684,23.4654 -0.29169,4.20172 -0.5699,8.40554 -0.97591,12.59776 -0.42798,4.4191 -1.0171,8.82112 -1.52565,13.23168 -2.36376,18.08107 -5.91038,35.99631 -10.32106,53.68554 -2.2227,8.91421 -3.19771,12.06846 -5.66026,20.69055 -5.28919,17.91996 -13.45405,34.74962 -22.08439,51.25189 -2.43729,5.41268 -8.70019,14.41289 -6.94805,20.70203 1.10592,3.96958 3.53216,5.59744 6.33798,8.46525 1.93553,1.42915 3.79532,2.96702 5.8066,4.28745 5.60504,3.67977 10.98502,6.39504 17.11334,9.18743 10.6374,4.84698 21.62532,8.73633 32.63164,12.63523 9.80955,3.147 19.58635,6.62477 29.75775,8.44285 4.70441,0.84089 5.29341,0.76999 9.93577,1.11648 5.58814,-0.0378 11.28471,-0.77838 16.36404,-3.26998 1.44947,-0.71102 3.8066,-0.878 4.17864,-2.44902 0.31064,-1.3117 -2.58243,0.77408 -3.87365,1.16113 1.51957,-1.55559 3.15108,-3.00919 4.55871,-4.66676 7.74349,-9.1184 12.14057,-20.4141 14.72082,-31.97916 0.82657,-3.70478 1.30897,-7.47804 1.96345,-11.21705 2.82867,-23.58074 1.24851,-47.35665 -1.95663,-70.80743 -0.66359,-4.85522 -1.47718,-9.68875 -2.21577,-14.53312 -3.73224,-21.44825 -8.6413,-42.69895 -14.70912,-63.60808 -1.15359,-3.97517 -2.40324,-7.92184 -3.60487,-11.88276 -4.69584,-15.44832 -10.06621,-30.67507 -15.14412,-45.99781 -2.4858,-7.50098 -4.49675,-13.93317 -6.87337,-21.43788 -2.76272,-8.87348 -5.18309,-17.84047 -6.93803,-26.9695 -0.4837,-2.51618 -0.97383,-5.03436 -1.30582,-7.57501 -0.73459,-5.62169 -0.67022,-8.46632 -0.8139,-14.03843 -0.0866,-6.46379 0.94607,-12.81359 2.35299,-19.09205 0,0 9.23197,-4.42987 9.23197,-4.42987 l 0,0 c -1.63578,6.24123 -2.88071,12.56629 -2.86131,19.05704 0.0614,5.85206 -0.0638,8.04533 0.63075,13.97543 1.37903,11.77448 4.53105,23.27455 7.80532,34.63191 6.89913,22.63828 14.80046,44.94816 21.82867,67.54638 1.20164,3.96958 2.45627,7.92351 3.60493,11.90874 6.0467,20.97895 10.95181,42.29742 14.49466,63.84224 0.73127,4.85801 1.53404,9.7058 2.19381,14.57404 3.17832,23.45199 4.97942,47.1994 2.51141,70.81438 -1.44307,8.82409 -1.81417,13.11632 -4.45842,21.58572 -3.12945,10.02352 -8.24697,19.28752 -15.84058,26.59575 -2.61862,1.76873 -12.19349,8.82828 -17.45209,11.23295 -5.19274,2.37455 -10.9385,2.99005 -16.58137,2.87327 -4.64728,-0.43604 -5.19424,-0.36803 -9.88242,-1.31379 -10.01916,-2.02119 -19.59987,-5.71074 -29.26898,-8.92959 -7.44549,-2.73407 -14.01233,-5.09373 -21.4135,-8.03417 -9.89439,-3.931 -19.86779,-8.01093 -28.88987,-13.74442 -2.08732,-1.32648 -4.01319,-2.89139 -6.01979,-4.33708 -3.09489,-3.06544 -5.62958,-4.68899 -6.90442,-8.97654 -2.03848,-6.8558 4.53584,-15.58892 7.22542,-21.43042 3.34569,-6.26237 5.08993,-9.37905 8.21546,-15.85673 5.51317,-11.42608 10.35901,-23.20145 14.14699,-35.31429 2.44224,-8.13457 3.80794,-12.43406 5.99382,-20.80156 4.60518,-17.62851 8.21945,-35.52766 10.43808,-53.61832 2.15708,-19.45879 4.1342,-39.32454 2.76863,-58.92117 -0.18724,-2.687 -0.59351,-5.35424 -0.89027,-8.03135 -0.39006,-2.49908 -0.71884,-5.00849 -1.17018,-7.49723 -2.0131,-11.10047 -5.07619,-22.17077 -10.77577,-31.98163 -2.34956,-3.41407 -2.78831,-4.38745 -5.60822,-7.26643 -4.78427,-4.88449 -10.68864,-8.55542 -16.4788,-12.09333 -6.10743,-3.27464 -7.30424,-4.03667 -13.82363,-7.00411 -11.28241,-5.13542 -23.05752,-9.13855 -35.04225,-12.28227 -2.83164,-0.65407 -5.65058,-1.3658 -8.49492,-1.96222 -12.01915,-2.52028 -24.40933,-4.08696 -36.67028,-2.63678 -7.95374,1.74314 -4.78165,1.71386 0.19708,-2.5413 0.87568,-0.74841 -2.06437,1.06774 -2.94008,1.8161 -3.26732,2.7922 -3.87245,6.32121 -4.1327,10.38662 0.15483,1.96953 0.1589,3.95675 0.46449,5.90858 0.92877,5.93225 2.6107,11.23232 4.73712,16.87021 4.62002,12.24933 10.68947,23.87086 17.43891,35.07017 2.57836,4.00367 5.03681,8.08715 7.73508,12.011 4.63287,6.73716 12.13286,16.56627 17.5825,22.6568 8.26822,9.24059 17.74837,17.31493 27.88145,24.42852 8.33173,5.44462 10.87939,7.36852 19.74577,12.09781 13.49028,7.19565 27.79699,12.85223 42.48429,17.0621 3.47213,0.83646 6.92281,1.76757 10.41639,2.50937 12.06029,2.56082 24.5673,4.13907 36.92008,3.71748 2.43953,-0.0833 4.86583,-0.39574 7.29875,-0.59361 5.20117,-0.86866 7.72277,-1.1215 12.77606,-2.63015 2.00279,-0.59793 3.83521,-2.3456 5.91023,-2.09464 1.33907,0.16195 -4.55451,2.74178 -3.24538,2.41693 1.31894,-0.32728 8.70676,-5.29156 9.77779,-5.99176 4.10545,-3.12781 4.73702,-3.48762 8.57707,-6.89022 5.26267,-4.66315 10.04925,-9.83841 14.86309,-14.95284 5.3463,-5.66851 10.80905,-11.24817 15.82367,-17.21445 5.5282,-7.02054 10.54639,-14.42193 15.39853,-21.92243 4.96634,-7.95349 9.76538,-16.03153 15.29851,-23.61176 2.05938,-2.61446 2.11975,-2.81284 4.27139,-5.11654 0.57028,-0.61058 1.06324,-1.32277 1.75857,-1.78594 3.40982,-2.27134 6.98259,-4.28853 10.50413,-6.38247 1.16259,-0.69129 1.62818,-0.76882 2.91073,-1.19687 1.44617,-0.1941 1.84447,-0.34609 3.35672,-0.11147 4.01089,0.62228 7.65628,2.85988 11.24029,4.58279 5.34897,2.84252 10.76799,5.61485 15.91976,8.80867 6.62608,4.10781 12.98714,8.69986 18.69798,14.01923 4.51582,4.88799 6.77652,6.65435 9.84078,12.57962 5.91218,11.43221 5.81247,24.30673 5.54068,36.81495 -0.40186,3.81972 -0.58511,7.6688 -1.20558,11.45915 -1.79802,10.98366 -5.60715,21.6138 -10.74278,31.46697 -1.76119,3.379 -3.63341,6.71352 -5.77387,9.86595 -2.11008,3.10771 -4.63249,5.9145 -6.94874,8.87174 -2.70364,2.55656 -5.08361,5.50611 -8.11091,7.66969 -7.06556,5.04967 -18.42198,11.69542 -27.3452,14.82316 -11.9788,4.19876 -24.78387,5.37899 -37.34986,6.15803 -4.73758,0.0753 -9.4752,0.30364 -14.21274,0.22603 -16.55802,-0.27125 -33.38285,-2.31871 -49.21313,-7.35076 -2.88766,-0.91791 -5.67592,-2.12335 -8.51387,-3.18503 -5.31587,-2.7143 -7.42849,-3.21358 -11.52223,-7.21406 -4.93645,-4.824 -6.64152,-11.35138 -6.89176,-18.04546 -0.0356,-5.35032 -0.13778,-6.29298 0.22959,-11.73681 0.541,-8.01686 1.71488,-15.9877 2.12114,-24.01694 0.1679,-4.58208 0.34155,-6.15028 0.0844,-10.60087 -0.39724,-6.87571 -2.04257,-13.53141 -4.59537,-19.92246 -0.94235,-2.21262 -1.80715,-4.4599 -2.82704,-6.63788 -3.84067,-8.20176 -8.46896,-16.21859 -14.11196,-23.32349 -4.74644,-5.97606 -7.21767,-7.86092 -12.8029,-13.0223 -5.89542,-4.18023 -7.89222,-6.00025 -14.44459,-9.05972 -7.67849,-3.58527 -15.88334,-5.65841 -24.40244,-5.11343 -2.88943,0.18484 -5.72589,0.86384 -8.58883,1.29576 -0.62283,-4.25809 -0.002,-3.38094 -7.68319,3.26557 -2.26077,1.95615 -4.12746,4.34268 -5.93673,6.72263 -1.96081,2.57928 -3.84623,5.24584 -5.3454,8.11811 -3.3344,6.38841 -4.23549,11.41516 -6.02958,18.29377 -1.74765,10.1542 -3.6811,21.00769 -2.23857,31.34557 0.092,0.65947 0.27412,1.30321 0.41119,1.95481 0,0 -9.25188,5.12804 -9.25188,5.12804 z"
;inkscape:connector-curvature="0" />

(def reconciler
  (om/reconciler
    {:state app-state
     :parser (om/parser {:read read})}))

(om/add-root! reconciler
              AnimalsList (gdom/getElement "app"))

(om/add-root! reconciler
              scarf (gdom/getElement "scarf-svg"))





;;; Example with Raphael.js
(defn- attr [object attributes]
  (.attr object (clj->js attributes)))

(defn create-hand [paper]
  (.getColor.reset js/Raphael)
  (-> (.set paper)
      (.push (-> (.path paper "M320,240c-50,100,50,110,0,190")
                 (attr {:fill "none", :stroke-width 2})))
      (.push (-> (.circle paper 320 450 20)
                 (attr {:fill "none", :stroke-width 2})))
      (.push (-> (.circle paper 320 240 5)
                 (attr {:fill "none", :stroke-width 10})))
      (.attr "stroke" (.getColor js/Raphael))))

(defn create-circle [paper angle hand]
  (let [c (.getColor js/Raphael)
        t (str "r" angle " 320 240")
        circle (.circle paper 320 450 20)]
    (-> circle
        (attr {:stroke c, :fill c, :transform t, :fill-opacity .4})
        (.click #(.animate hand (clj->js {:stroke c, :transform t}) 2000 "bounce"))
        (.mouseover #(.animate circle (clj->js {:fill-opacity .75}) 500))
        (.mouseout #(.animate circle (clj->js {:fill-opacity .4}) 500)))))

(defn ^:export draw []
  (let [paper (js/Raphael 0 0 640 480)]
    (let [hand (create-hand paper)]
      (doseq [angle (range 0 360 30)]
        (create-circle paper angle hand)))))

(draw)