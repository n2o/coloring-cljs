(ns scarf.components.pdf
  (:require [goog.dom :as gdom]
            [om.next :as om :refer-macros [defui]]
            [sablono.core :as html :refer-macros [html]]
            [scarf.components.order :as order]
            [scarf.templates.utils :as utils]))

(def ausruester-logo "data:image/png;base64,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")

































(defn- extract-order-description [current mid1 mid2 stripe1 stripe2 stripe-option]
  #_(.-innerHTML)
  (order/order-template
   (utils/stripe-dispatch-with-option current stripe-option)
   {:mid1 mid1 :mid2 mid2
    :stripe1 stripe1 :stripe2 stripe2
    :stripe-option stripe-option}))

(defn- build-article-pdf [current mid1 mid2 stripe1 stripe2 stripe-option]
  (let [pdf (js/jsPDF "portrait", "mm", "a4")
        c (.-canvas pdf)]
    (.addImage pdf ausruester-logo "png" 10 10)
    (.setTextColor pdf 33 37 41)

    (.setFontSize pdf 16)
    (.text pdf 10 50 "Dein konfiguriertes Halstuch:")

    (let [order-description (extract-order-description current mid1 mid2 stripe1 stripe2 stripe-option)
          descr (map rest (-> order-description second rest))
          attributes (mapv rest (-> order-description rest rest))]
      (.setFontSize pdf 12)
      (doall (map-indexed (fn [i [k v]] (.text pdf 10 (+ 60 (* i 10)) (str k v))) descr))
      (doall (map-indexed (fn [i [k v]] (.text pdf 10 (+ 80 (* i 10)) (str k v))) attributes)))

    (.setFontSize pdf 16)
    (.text pdf 10 150 "Generierte Vorschau:")
    (js/canvg c (.-outerHTML (gdom/getElement "scarf-drawing"))
              (clj->js {:offsetY 520
                        :offsetX 20
                        :scaleWidth 200
                        :ignoreMouse true
                        :ignoreAnimation true
                        :ignoreDimensions true}))
    pdf))

(defui ScarfPDF
  static om/IQuery
  (query [this] [:scarf/current :scarf/mid1 :scarf/mid2
                 :scarf/stripe1 :scarf/stripe2
                 :option/stripe])
  Object
  (render
   [this]
   (let [{:keys [scarf/current scarf/mid1 scarf/mid2
                 scarf/stripe1 scarf/stripe2
                 option/stripe]} (om/props this)]
     (if (and (utils/stripe-dispatch current)
              (zero? (count (name stripe))))
       (html [:p "Bitte oben den Randtyp auswählen!"])
       (html [:div.btn.btn-danger {:onClick #(.save (build-article-pdf current mid1 mid2 stripe1 stripe2 stripe))}
              "i am groot"])))))
(def svg-export (om/factory ScarfPDF))
